<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert data frames into a tidy structure — tidy_table • unpivotr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45097885-5', 'auto');
  ga('send', 'pageview');

</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">unpivotr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/compass-directions.html">Compass Directions</a>
    </li>
    <li>
      <a href="../articles/html.html">HTML Tables</a>
    </li>
    <li>
      <a href="../articles/small-multiples.html">Small Multiples</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/nacnudus/unpivotr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert data frames into a tidy structure</h1>
    </div>

    
    <p>Data frames represent data in a
tabular structure.  <code>tidy_table</code> takes the row and column position of
each 'cell', and returns that information in a new data frame, alongside the
content of each cell.</p>
<p>This makes certain tasks easier.  For example, a pivot table with multi-row
headers that has been imported into R as a data frame may be easier to
un-pivot by converting it with <code>tidy_table</code> first.</p>
<p>For HTML tables, the content of each cell is returned as standalone HTML that
can be further parsed with tools such as the rvest package.  This is
particularly useful when an HTML cell itself contains an HTML table, or
contains both text and a URL, which must be extracted separately.  If the
HTML itself is poorly formatted, try passing it through the htmltidy package
first.</p>
<p>This is an S3 generic.</p>
    

    <pre class="usage"><span class='fu'>tidy_table</span>(<span class='no'>x</span>, <span class='kw'>rownames</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>colnames</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A data.frame or an HTML document</p></td>
    </tr>
    <tr>
      <th>rownames</th>
      <td><p>Whether to include the column names in the output, Default:
FALSE</p></td>
    </tr>
    <tr>
      <th>colnames</th>
      <td><p>Whether to include the row names in the output, Default:
FALSE</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data.frame with columns 'row' and 'col' (integer) giving the
original position of the 'cells', and any relevant columns for cell values in
their original types: 'chr', 'cplx', 'cplx', 'dbl', 'fctr', 'int', 'lgl', and
'list'.  The columns 'fctr' is, like 'list', a list-column (each element is
itself a list) to avoid factor levels clashing.  For HTML tables, the column
'html' gives the HTML of the original cell.</p>
<p>Row and column names, when present and required, are treated as though they
were cells in the table, and they appear in the 'chr' column.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>tidy_table</span>(<span class='no'>Formaldehyde</span>)</div><div class='output co'>#&gt; # A tibble: 12 x 3
#&gt;      row   col    dbl
#&gt;    &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
#&gt;  1     1     1 0.100 
#&gt;  2     2     1 0.300 
#&gt;  3     3     1 0.500 
#&gt;  4     4     1 0.600 
#&gt;  5     5     1 0.700 
#&gt;  6     6     1 0.900 
#&gt;  7     1     2 0.0860
#&gt;  8     2     2 0.269 
#&gt;  9     3     2 0.446 
#&gt; 10     4     2 0.538 
#&gt; 11     5     2 0.626 
#&gt; 12     6     2 0.782 </div><div class='input'><span class='fu'>tidy_table</span>(<span class='kw pkg'>tidyr</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/tidyr/topics/nest'>nest</a></span>(<span class='no'>chickwts</span>, -<span class='no'>feed</span>))</div><div class='output co'>#&gt; # A tibble: 12 x 4
#&gt;      row   col fctr       list                 
#&gt;    &lt;int&gt; &lt;int&gt; &lt;list&gt;     &lt;list&gt;               
#&gt;  1     1     1 &lt;fctr [1]&gt; &lt;NULL&gt;               
#&gt;  2     2     1 &lt;fctr [1]&gt; &lt;NULL&gt;               
#&gt;  3     3     1 &lt;fctr [1]&gt; &lt;NULL&gt;               
#&gt;  4     4     1 &lt;fctr [1]&gt; &lt;NULL&gt;               
#&gt;  5     5     1 &lt;fctr [1]&gt; &lt;NULL&gt;               
#&gt;  6     6     1 &lt;fctr [1]&gt; &lt;NULL&gt;               
#&gt;  7     1     2 &lt;NULL&gt;     &lt;data.frame [10 × 1]&gt;
#&gt;  8     2     2 &lt;NULL&gt;     &lt;data.frame [12 × 1]&gt;
#&gt;  9     3     2 &lt;NULL&gt;     &lt;data.frame [14 × 1]&gt;
#&gt; 10     4     2 &lt;NULL&gt;     &lt;data.frame [12 × 1]&gt;
#&gt; 11     5     2 &lt;NULL&gt;     &lt;data.frame [11 × 1]&gt;
#&gt; 12     6     2 &lt;NULL&gt;     &lt;data.frame [12 × 1]&gt;</div><div class='input'><span class='fu'>tidy_table</span>(<span class='no'>Formaldehyde</span>, <span class='kw'>colnames</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; # A tibble: 14 x 4
#&gt;      row   col chr        dbl
#&gt;    &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;
#&gt;  1     1     1 carb   NA     
#&gt;  2     2     1 &lt;NA&gt;    0.100 
#&gt;  3     3     1 &lt;NA&gt;    0.300 
#&gt;  4     4     1 &lt;NA&gt;    0.500 
#&gt;  5     5     1 &lt;NA&gt;    0.600 
#&gt;  6     6     1 &lt;NA&gt;    0.700 
#&gt;  7     7     1 &lt;NA&gt;    0.900 
#&gt;  8     1     2 optden NA     
#&gt;  9     2     2 &lt;NA&gt;    0.0860
#&gt; 10     3     2 &lt;NA&gt;    0.269 
#&gt; 11     4     2 &lt;NA&gt;    0.446 
#&gt; 12     5     2 &lt;NA&gt;    0.538 
#&gt; 13     6     2 &lt;NA&gt;    0.626 
#&gt; 14     7     2 &lt;NA&gt;    0.782 </div><div class='input'><span class='fu'>tidy_table</span>(<span class='no'>Formaldehyde</span>, <span class='kw'>rownames</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; # A tibble: 18 x 4
#&gt;      row   col chr       dbl
#&gt;    &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;
#&gt;  1     1     1 1     NA     
#&gt;  2     2     1 2     NA     
#&gt;  3     3     1 3     NA     
#&gt;  4     4     1 4     NA     
#&gt;  5     5     1 5     NA     
#&gt;  6     6     1 6     NA     
#&gt;  7     1     2 &lt;NA&gt;   0.100 
#&gt;  8     2     2 &lt;NA&gt;   0.300 
#&gt;  9     3     2 &lt;NA&gt;   0.500 
#&gt; 10     4     2 &lt;NA&gt;   0.600 
#&gt; 11     5     2 &lt;NA&gt;   0.700 
#&gt; 12     6     2 &lt;NA&gt;   0.900 
#&gt; 13     1     3 &lt;NA&gt;   0.0860
#&gt; 14     2     3 &lt;NA&gt;   0.269 
#&gt; 15     3     3 &lt;NA&gt;   0.446 
#&gt; 16     4     3 &lt;NA&gt;   0.538 
#&gt; 17     5     3 &lt;NA&gt;   0.626 
#&gt; 18     6     3 &lt;NA&gt;   0.782 </div><div class='input'>
<span class='no'>colspan</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>, <span class='st'>"colspan.html"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"unpivotr"</span>)
<span class='no'>rowspan</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>, <span class='st'>"rowspan.html"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"unpivotr"</span>)
<span class='no'>nested</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>, <span class='st'>"nested.html"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"unpivotr"</span>)</div><span class='co'># NOT RUN {</span>
<span class='fu'>browseURL</span>(<span class='no'>colspan</span>)
<span class='fu'>browseURL</span>(<span class='no'>rowspan</span>)
<span class='fu'>browseURL</span>(<span class='no'>nestedspan</span>)
<span class='co'># }</span><div class='input'>
<span class='fu'>tidy_table</span>(<span class='kw pkg'>xml2</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/xml2/topics/read_xml'>read_html</a></span>(<span class='no'>colspan</span>))</div><div class='output co'>#&gt; [[1]]
#&gt; # A tibble: 4 x 3
#&gt;     row   col html                                    
#&gt;   &lt;int&gt; &lt;int&gt; &lt;chr&gt;                                   
#&gt; 1     1     1 "&lt;th colspan=\"2\"&gt;Header (1, 1:2)&lt;/th&gt;"
#&gt; 2     2     1 &lt;td&gt;cell (2, 1)&lt;/td&gt;                    
#&gt; 3     1     2 &lt;NA&gt;                                    
#&gt; 4     2     2 &lt;td&gt;cell (2, 2)&lt;/td&gt;                    
#&gt; </div><div class='input'><span class='fu'>tidy_table</span>(<span class='kw pkg'>xml2</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/xml2/topics/read_xml'>read_html</a></span>(<span class='no'>rowspan</span>))</div><div class='output co'>#&gt; [[1]]
#&gt; # A tibble: 4 x 3
#&gt;     row   col html                                    
#&gt;   &lt;int&gt; &lt;int&gt; &lt;chr&gt;                                   
#&gt; 1     1     1 "&lt;th rowspan=\"2\"&gt;Header (1:2, 1)&lt;/th&gt;"
#&gt; 2     2     1 &lt;NA&gt;                                    
#&gt; 3     1     2 &lt;th&gt;Header (1, 2)&lt;/th&gt;                  
#&gt; 4     2     2 &lt;td&gt;cell (2, 2)&lt;/td&gt;                    
#&gt; </div><div class='input'><span class='fu'>tidy_table</span>(<span class='kw pkg'>xml2</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/xml2/topics/read_xml'>read_html</a></span>(<span class='no'>nested</span>))</div><div class='output co'>#&gt; [[1]]
#&gt; # A tibble: 4 x 3
#&gt;     row   col html                                                             
#&gt;   &lt;int&gt; &lt;int&gt; &lt;chr&gt;                                                            
#&gt; 1     1     1 &lt;th&gt;Header (1, 1)&lt;/th&gt;                                           
#&gt; 2     2     1 &lt;td&gt;cell (2, 1)&lt;/td&gt;                                             
#&gt; 3     1     2 &lt;th&gt;Header (1, 2)&lt;/th&gt;                                           
#&gt; 4     2     2 "&lt;td&gt;\n          &lt;table&gt;\n&lt;tr&gt;\n&lt;th&gt;Header (2, 2)(1, 1)&lt;/th&gt;\n  …
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Duncan Garmonsway.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
